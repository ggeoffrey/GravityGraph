<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>GravityGraph</title>
    <link rel="stylesheet" href="main.css"/>
</head>
<body>



    <canvas id="dev-canvas" width="1300" height="600">
        Sadly, your browser doesn't support this technology. <br/>
        Please update your browser or your drivers.
    </canvas>

    <div id="toolbar">
        <button onclick="gravityGraph.resetFocus()">
            Reset
        </button>
        <button onclick="gravityGraph.focusOnRelations()">
            Show relations
        </button>
        <button onclick="gravityGraph.focusOnGroup()">
            Show group
        </button>
    </div>

    <div id="tooltip"></div>

    <script src="vendors/three.js"></script>
    <script src="vendors/Detector.js"></script>
    <script src="vendors/OrbitControls.js"></script>
    <script src="vendors/CanvasRenderer.js"></script>
    <script src="vendors/Projector.js"></script>
        
    <script src="vendors/d3.js"></script>
    <script src="vendors/d3.layout.force3D.js"></script>
        
    <script src="vendors/stats.min.js"></script>
    <script src="vendors/tweenjs-0.6.0.min.js"></script>
    
    

    <script src="dist/GravityGraph.js"></script>

    <script>
        
        /// <reference path="dist/GravityGraph.js" />        
        
        var gravityGraph = new GravityGraph({
            target : 'dev-canvas',
            //opacity: 0,
            //backgroundColor : 0xffffff,
            quality : "high",
            flat : true,
            flow : false,
            stats : true
        });
        
        
        var tooltip = document.getElementById('tooltip');
        gravityGraph.on('nodeOvered', function (event, data) {
            tooltip.style.left = (event.clientX + 20) + "px";
            tooltip.style.top = (event.clientY - 20) + "px";
            
            tooltip.innerText = data.name;
            tooltip.style.opacity = "1";
        });
        
        gravityGraph.on('nodeBlur', function (event) {
            tooltip.style.opacity = "0";
        });
        
        gravityGraph.on('nodeSelected', function (event, data) {
            document.title = data.name;
        });
        
        
        d3.json("data-test/miserables.json", function(error, graph) {
            if (error) {
                console.error(error);
            }
            else {
                gravityGraph.setNodes(graph.nodes);
                gravityGraph.setLinks(graph.links);
                               
                gravityGraph.start();
            }
        });
        
        
    </script>
</body>
</html>